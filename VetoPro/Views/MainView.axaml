<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="clr-namespace:VetoPro.ViewModels"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="VetoPro.Views.MainView"
             x:DataType="vm:MainViewModel">
  <Design.DataContext>
    <vm:MainViewModel />
  </Design.DataContext>

  <Grid RowDefinitions="Auto,*" Margin="20">
    
    <!-- Header Section -->
    <StackPanel Grid.Row="0" Spacing="10" Margin="0,0,0,20">
      <TextBlock Text="VetoPro - Gestion des Espèces et Races" 
                 FontSize="24" 
                 FontWeight="Bold"/>
      
      <!-- Loading Indicator -->
      <StackPanel Orientation="Horizontal" 
                  Spacing="10"
                  IsVisible="{Binding IsLoading}">
        <TextBlock Text="⏳" FontSize="16"/>
        <TextBlock Text="Chargement en cours..." 
                   FontSize="14" 
                   VerticalAlignment="Center"/>
      </StackPanel>
      
      <!-- Error Message -->
      <Border Background="#FFEBEE" 
              BorderBrush="#F44336" 
              BorderThickness="1" 
              CornerRadius="4" 
              Padding="10"
              IsVisible="{Binding ErrorMessage, Converter={x:Static StringConverters.IsNotNullOrEmpty}}">
        <TextBlock Text="{Binding ErrorMessage}" 
                   Foreground="#C62828" 
                   TextWrapping="Wrap"/>
      </Border>
    </StackPanel>

    <!-- Main Content -->
    <Grid Grid.Row="1" ColumnDefinitions="*,20,*">
      
      <!-- Left Panel - Species List -->
      <Border Grid.Column="0" 
              BorderBrush="#E0E0E0" 
              BorderThickness="1" 
              CornerRadius="8"
              Background="White">
        <Grid RowDefinitions="Auto,*">
          
          <!-- Species Header -->
          <Border Grid.Row="0" 
                  Background="#2196F3" 
                  Padding="15,10">
            <TextBlock Text="Espèces" 
                       Foreground="White" 
                       FontSize="16" 
                       FontWeight="SemiBold"/>
          </Border>
          
          <!-- Species ListBox -->
          <ListBox Grid.Row="1"
                   ItemsSource="{Binding Species}"
                   SelectedItem="{Binding SelectedSpecies}"
                   Background="Transparent"
                   Padding="10">
            <ListBox.ItemTemplate>
              <DataTemplate>
                <Border Padding="10,8" 
                        Background="Transparent">
                  <TextBlock Text="{Binding Name}" 
                             FontSize="14"/>
                </Border>
              </DataTemplate>
            </ListBox.ItemTemplate>
          </ListBox>
          
        </Grid>
      </Border>

      <!-- Right Panel - Breeds List -->
      <Border Grid.Column="2" 
              BorderBrush="#E0E0E0" 
              BorderThickness="1" 
              CornerRadius="8"
              Background="White">
        <Grid RowDefinitions="Auto,*">
          
          <!-- Breeds Header -->
          <Border Grid.Row="0" 
                  Background="#4CAF50" 
                  Padding="15,10">
            <TextBlock FontSize="16" 
                       Foreground="White" 
                       FontWeight="SemiBold">
              <TextBlock.Text>
                <MultiBinding StringFormat="Races ({0})">
                  <Binding Path="Breeds.Count"/>
                </MultiBinding>
              </TextBlock.Text>
            </TextBlock>
          </Border>
          
          <!-- Breeds ListBox -->
          <ListBox Grid.Row="1"
                   ItemsSource="{Binding Breeds}"
                   Background="Transparent"
                   Padding="10">
            <ListBox.ItemTemplate>
              <DataTemplate>
                <Border Padding="10,8" 
                        Background="Transparent">
                  <TextBlock Text="{Binding Name}" 
                             FontSize="14"/>
                </Border>
              </DataTemplate>
            </ListBox.ItemTemplate>
          </ListBox>

          <!-- Empty State -->
          <StackPanel Grid.Row="1"
                      HorizontalAlignment="Center"
                      VerticalAlignment="Center"
                      Spacing="10"
                      IsVisible="{Binding !Breeds.Count}">
            <TextBlock Text="🐾" 
                       FontSize="48" 
                       HorizontalAlignment="Center"
                       Opacity="0.3"/>
            <TextBlock Text="Sélectionnez une espèce" 
                       FontSize="14" 
                       Foreground="Gray"
                       HorizontalAlignment="Center"/>
          </StackPanel>
          
        </Grid>
      </Border>

    </Grid>
  </Grid>
</UserControl>